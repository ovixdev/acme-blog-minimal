---
// src/pages/index.astro

import { getCollection } from "astro:content";
import PostCard from "../components/PostCard.astro";
import BaseLayout from "../layouts/BaseLayout.astro";

// Fetch all posts from the collection
const allPosts = await getCollection("posts");

// Sort posts by date (newest first)
const sortedPosts = allPosts.sort((a, b) => {
  return new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime();
});
---

<BaseLayout title="Home" description="Welcome to Acme Ltd Blog - Tech & Marketing Insights">
  <section class="hero">
    <h1>Welcome to Acme Ltd Blog</h1>
    <p class="tagline">Tech & Marketing Insights</p>
    <p class="intro">
      We share practical insights on technology and marketing strategies
      to help your business grow.
    </p>
  </section>

  <section class="posts-section">
    <h2>Latest Posts</h2>

    <div class="posts-list">
      {sortedPosts.map((post) => (
        <PostCard
          title={post.data.title}
          url={`/posts/${post.slug}`}
          pubDate={post.data.pubDate}
          author={post.data.author}
          description={post.data.description}
          tags={post.data.tags}
        />
      ))}
    </div>
  </section>
</BaseLayout>

<style>
  .hero {
    text-align: center;
    padding: 2rem 0 3rem;
    border-bottom: 1px solid #eee;
    margin-bottom: 3rem;
  }

  .hero h1 {
    font-size: 2.75rem;
    color: #1a1a2e;
    margin-bottom: 0.5rem;
  }

  .tagline {
    font-size: 1.25rem;
    color: #666;
    margin-bottom: 1rem;
  }

  .intro {
    max-width: 600px;
    margin: 0 auto;
    color: #444;
  }

  .posts-section h2 {
    font-size: 1.5rem;
    color: #1a1a2e;
    margin-bottom: 1.5rem;
  }

  .posts-list {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
</style>